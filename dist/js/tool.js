/*! For license information please see tool.js.LICENSE.txt */
(()=>{"use strict";var e,t={415:(e,t,r)=>{const n=Vue;var o={key:0},a={class:"flex flex-row items-center justify-between"},i={class:"font-normal text-xl md:text-xl mb-3"},c={class:"card"},l={"data-testid":"resource-table",class:"table w-full rounded-lg overflow-hidden shadow"},s={class:"bg-gray-50 dark:bg-gray-700"},u=(0,n.createElementVNode)("th",null,null,-1),d={class:"text-left text-gray-500 dark:text-gray-400 py-2"},p={class:"text-left text-gray-500 dark:text-gray-400 py-2"},f={class:"text-left text-gray-500 dark:text-gray-400 py-2"},h={class:"text-left text-gray-500 dark:text-gray-400 py-2"},y={class:"text-left text-gray-500 dark:text-gray-400 py-2"},g={key:0,class:"text-gray-500 py-2"},v={class:"group bg-white dark:bg-gray-800"},m={class:"py-2 border-t border-gray-100 dark:border-gray-800"},w={class:"px-4"},x={key:0,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"save",class:"h-4 text-60 svg-inline--fa fa-save fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},b=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},null,-1)],k={key:1,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"save",class:"h-4 text-60 svg-inline--fa fa-save fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},E=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},null,-1)],N={key:2,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash-alt",class:"h-4 text-60 svg-inline--fa fa-trash-alt fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},null,-1)],V={class:"py-2 border-t border-gray-100 dark:border-gray-800"},L={class:"py-2 border-t border-gray-100 dark:border-gray-800"},C={class:"py-2 border-t border-gray-100 dark:border-gray-800"},S={class:"py-2 border-t border-gray-100 dark:border-gray-800"},B={class:"my-2"},O={class:"inline-block bg-30 p-1 rounded-sm mr-2 font-bold"},D={class:"py-2 border-t border-gray-100 dark:border-gray-800"},A={class:"my-2"},j={class:"inline-block bg-30 p-1 rounded-sm mr-2 font-bold"},I={key:0,class:"py-2 text-center border-t border-gray-100 dark:border-gray-800"},F=["onClick"],P=(0,n.createElementVNode)("defs",{id:"defs3455"},null,-1),T=(0,n.createElementVNode)("g",{transform:"matrix(1,0,0,-1,113.89831,1262.6441)",id:"g3449"},[(0,n.createElementVNode)("path",{d:"M 1536,640 Q 1536,484 1475,342 1414,200 1311,97 1208,-6 1066,-67 924,-128 768,-128 589,-128 431.5,-52 274,24 165.5,161 57,298 18,473 q -3,14 7,27 9,12 25,12 h 199 q 23,0 30,-23 Q 329,327 464,227.5 599,128 768,128 872,128 966.5,168.5 1061,209 1130,278 q 69,69 109.5,163.5 40.5,94.5 40.5,198.5 0,104 -40.5,198.5 Q 1199,933 1130,1002 1061,1071 966.5,1111.5 872,1152 768,1152 670,1152 580,1116.5 490,1081 420,1015 L 557,877 q 31,-30 14,-69 -17,-40 -59,-40 H 64 Q 38,768 19,787 0,806 0,832 v 448 q 0,42 40,59 39,17 69,-14 l 130,-129 q 107,101 244.5,156.5 137.5,55.5 284.5,55.5 156,0 298,-61 142,-61 245,-164 103,-103 164,-245 61,-142 61,-298 z",id:"path3451","inkscape:connector-curvature":"0",style:{fill:"currentColor"}})],-1),M={class:"bg-20 rounded-b","per-page":"5","resource-count-label":"1-3 of 3","current-resource-count":"3","all-matching-resource-count":"3"},z={class:"flex justify-between items-center"},G=["disabled"],R={class:"text-sm text-80 px-4"},H=["disabled"];var q={class:"table w-full rounded-lg overflow-hidden mt-4"},$={class:"bg-gray-50 dark:bg-gray-800"},Q={class:"text-left px-2 whitespace-nowrap uppercase text-gray-500 dark:text-gray-400 text-xxs tracking-wide py-2",style:{"max-width":"20px"}},Y={class:"text-left px-2 whitespace-nowrap uppercase text-gray-500 dark:text-gray-400 text-xxs tracking-wide py-2"},Z={class:"text-left px-2 whitespace-nowrap uppercase text-gray-500 dark:text-gray-400 text-xxs tracking-wide py-2"},U={class:"text-left px-2 whitespace-nowrap uppercase text-gray-500 dark:text-gray-400 text-xxs tracking-wide py-2"},J={class:"divide-y divide-gray-100 dark:divide-gray-700"},K={class:"group"},W={style:{"max-width":"20px"},class:"px-2 py-2 whitespace-nowrap dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},X=["value"],ee={class:"px-2 py-2 whitespace-nowrap dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},te={class:"px-2 py-2 whitespace-nowrap dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},re={class:"px-2 py-2 whitespace-nowrap dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},ne={key:0},oe={colspan:"4",class:"px-2 py-2 whitespace-nowrap text-center dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},ae={class:"ml-auto"};function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(){ce=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new _(o||[]);return n(i,"_invoke",{value:b(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function h(){}var y={};l(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(V([])));v&&v!==t&&r.call(v,a)&&(y=v);var m=h.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(n,a,i,c){var l=u(e[n],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==ie(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function V(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=h,n(m,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:f,configurable:!0}),f.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(m),l(m,c,"Generator"),l(m,a,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=V,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:V(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function le(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}const se={props:["fields","audit","resourceName","resourceId"],data:function(){return{restoreIds:[],selectAll:!1}},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){var e,t=this;return(e=ce().mark((function e(){var r,n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.restoreIds.length>0)){e.next=6;break}return e.next=3,Nova.request().post("/nova-vendor/auditable-log/audits/".concat(t.resourceName,"/").concat(t.resourceId,"/").concat(t.audit.id),{restore:t.restoreIds});case 3:r=e.sent,n=t.restoreIds.map((function(e){return{key:e,value:r.data.record[e]}})),t.$emit("restored",n);case 6:t.$emit("close");case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){le(a,n,o,i,c,"next",e)}function c(e){le(a,n,o,i,c,"throw",e)}i(void 0)}))})()},toggleSelectAll:function(){this.allSelected?this.restoreIds=[]:this.restoreIds=this.comparison.map((function(e){return e.key}))}},computed:{allSelected:function(){return this.comparison.length===this.restoreIds.length},comparison:function(){var e=this;return Object.keys(this.audit.new_values).map((function(t){return void 0===e.fields[t]||e.fields[t].value==e.audit.new_values[t]?null:{key:t,label:e.fields[t].label,current:e.fields[t].value,restore:e.audit.new_values[t]}})).filter((function(e){return null!==e}))}}};var ue=r(744);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(){pe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new _(o||[]);return n(i,"_invoke",{value:b(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function h(){}var y={};l(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(V([])));v&&v!==t&&r.call(v,a)&&(y=v);var m=h.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(n,a,i,c){var l=u(e[n],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==de(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=k(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function V(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=h,n(m,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:f,configurable:!0}),f.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(m),l(m,c,"Generator"),l(m,a,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=V,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:V(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function fe(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}const he={props:["resourceName","resourceId","field"],components:{RestoreAuditModal:(0,ue.Z)(se,[["render",function(e,t,r,o,a,i){var c=(0,n.resolveComponent)("ModalHeader"),l=(0,n.resolveComponent)("checkbox"),s=(0,n.resolveComponent)("ModalContent"),u=(0,n.resolveComponent)("LinkButton"),d=(0,n.resolveComponent)("LoadingButton"),p=(0,n.resolveComponent)("ModalFooter"),f=(0,n.resolveComponent)("Modal");return(0,n.openBlock)(),(0,n.createBlock)(f,{onModalClose:i.handleClose,show:!0,role:"alertdialog",size:"5xl"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((function(){return i.handleConfirm&&i.handleConfirm.apply(i,arguments)}),["prevent"])),"slot-scope":"props",class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},[(0,n.createVNode)(c,null,{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Restore audit")),1)]})),_:1}),(0,n.createVNode)(s,null,{default:(0,n.withCtx)((function(){var r;return[(0,n.createElementVNode)("table",q,[(0,n.createElementVNode)("thead",$,[(0,n.createElementVNode)("th",Q,[(null===(r=i.comparison)||void 0===r?void 0:r.length)>0?((0,n.openBlock)(),(0,n.createBlock)(l,{key:0,onInput:i.toggleSelectAll,checked:i.allSelected},null,8,["onInput","checked"])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("th",Y,(0,n.toDisplayString)(e.__("Field")),1),(0,n.createElementVNode)("th",Z,(0,n.toDisplayString)(e.__("Current")),1),(0,n.createElementVNode)("th",U,(0,n.toDisplayString)(e.__("Restore to")),1)]),(0,n.createElementVNode)("tbody",J,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.comparison,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",K,[(0,n.createElementVNode)("td",W,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.restoreIds=e}),value:e.key},null,8,X),[[n.vModelCheckbox,a.restoreIds]])]),(0,n.createElementVNode)("td",ee,(0,n.toDisplayString)(e.label),1),(0,n.createElementVNode)("td",te,(0,n.toDisplayString)(e.current),1),(0,n.createElementVNode)("td",re,(0,n.toDisplayString)(e.restore),1)])})),256)),0==i.comparison.length?((0,n.openBlock)(),(0,n.createElementBlock)("tr",ne,[(0,n.createElementVNode)("td",oe,(0,n.toDisplayString)(e.__("No changes")),1)])):(0,n.createCommentVNode)("",!0)])])]})),_:1}),(0,n.createVNode)(p,null,{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",ae,[(0,n.createVNode)(u,{type:"button","data-testid":"cancel-button",dusk:"cancel-delete-button",onClick:(0,n.withModifiers)(i.handleClose,["prevent"]),class:"mr-3"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Cancel")),1)]})),_:1},8,["onClick"]),(0,n.createVNode)(d,{ref:"confirmButton","data-testid":"confirm-button",dusk:"confirm-delete-button",processing:e.working,disabled:e.working,component:"DangerButton",type:"submit"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Restore")),1)]})),_:1},8,["processing","disabled"])])]})),_:1})],32)]})),_:1},8,["onModalClose"])}]])},data:function(){return{audits:[],displayAudits:!1,pagination:{},restore:null,parentFields:[],canRestore:!1}},mounted:function(){var e,t;!0===this.displayAudits&&this.fetchAudits(),this.parentFields=(e=this.$parent.$parent.$.vnode.component.data.panels[0].fields,t={},e.filter((function(e){return""!==e.attribute})).forEach((function(e){if(""!==e.attribute){var r=e.attribute,n=e.value,o=e.name;t[r]={value:n,label:o}}})),t.length!==e.length&&e.filter((function(e){return""===e.attribute&&void 0!==e.dependencies&&e.dependencies.length===e.dependencies.filter((function(e){return e.satisfied})).length})).forEach((function(e){e.fields.forEach((function(e){var r=e.attribute,n=e.value,o=e.name;t[r]={value:n,label:o}}))})),t)},methods:{showAndFetch:function(){this.displayAudits=!0,this.fetchAudits()},close:function(){this.displayAudits=!1},fetchAudits:function(){var e,t=arguments,r=this;return(e=pe().mark((function e(){var n,o,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.length>0&&void 0!==t[0]?t[0]:null)||(n="/nova-vendor/auditable-log/audits/".concat(r.resourceName,"/").concat(r.resourceId)),e.prev=2,e.next=5,Nova.request().get(n);case 5:o=e.sent,a=o.data,r.audits=a.audits.data,r.pagination=a.audits,r.canRestore=a.restore,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,c,"next",e)}function c(e){fe(a,n,o,i,c,"throw",e)}i(void 0)}))})()},formatData:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({name:r,value:e[r]});return t},showRestoreAudit:function(e){this.restore=e},restored:function(e){var t=this;e.forEach((function(e){t.parentFields[e.key].value=e.value})),this.fetchAudits()}}},ye=(0,ue.Z)(he,[["render",function(e,t,r,q,$,Q){var Y=(0,n.resolveComponent)("DefaultButton"),Z=(0,n.resolveComponent)("sodipodi:namedview"),U=(0,n.resolveComponent)("restore-audit-modal"),J=(0,n.resolveComponent)("portal");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[$.displayAudits?((0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("h2",i,(0,n.toDisplayString)(e.__("Audit Log")),1),$.displayAudits?((0,n.openBlock)(),(0,n.createBlock)(Y,{key:0,class:"btn btn-default btn-primary ml-4 mb-2",onClick:(0,n.withModifiers)(Q.close,["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Close Audit Log")),1)]})),_:1},8,["onClick"])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("table",l,[(0,n.createElementVNode)("thead",s,[(0,n.createElementVNode)("tr",null,[u,(0,n.createElementVNode)("th",d,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("User")),1)]),(0,n.createElementVNode)("th",p,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Event")),1)]),(0,n.createElementVNode)("th",f,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Date/Time")),1)]),(0,n.createElementVNode)("th",h,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Old Values")),1)]),(0,n.createElementVNode)("th",y,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("New Values")),1)]),$.canRestore?((0,n.openBlock)(),(0,n.createElementBlock)("th",g)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)($.audits,(function(t){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",v,[(0,n.createElementVNode)("td",m,[(0,n.createElementVNode)("div",w,["created"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",x,b)):(0,n.createCommentVNode)("",!0),"updated"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",k,E)):(0,n.createCommentVNode)("",!0),"deleted"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",N,_)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("td",V,(0,n.toDisplayString)(t.user?t.user.name:e.__("console")),1),(0,n.createElementVNode)("td",L,(0,n.toDisplayString)(t.event),1),(0,n.createElementVNode)("td",C,(0,n.toDisplayString)(t.created_at),1),(0,n.createElementVNode)("td",S,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(Q.formatData(t.old_values),(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",B,[(0,n.createElementVNode)("span",O,(0,n.toDisplayString)(e.name),1),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.value),1)])})),256))]),(0,n.createElementVNode)("td",D,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(Q.formatData(t.new_values),(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",A,[(0,n.createElementVNode)("span",j,(0,n.toDisplayString)(e.name),1),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.value),1)])})),256))]),$.canRestore?((0,n.openBlock)(),(0,n.createElementBlock)("td",I,[((0,n.openBlock)(),(0,n.createElementBlock)("svg",{onClick:function(e){return Q.showRestoreAudit(t)},style:{"max-width":"20px"},"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",viewBox:"0 -256 1792 1792",id:"svg3447",version:"1.1","inkscape:version":"0.48.3.1 r9886",width:"100%",height:"100%","sodipodi:docname":"undo_font_awesome.svg"},[P,(0,n.createVNode)(Z,{pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1",objecttolerance:"10",gridtolerance:"10",guidetolerance:"10","inkscape:pageopacity":"0","inkscape:pageshadow":"2","inkscape:window-width":"640","inkscape:window-height":"480",id:"namedview3453",showgrid:"false","inkscape:zoom":"0.13169643","inkscape:cx":"896","inkscape:cy":"896","inkscape:window-x":"0","inkscape:window-y":"25","inkscape:window-maximized":"0","inkscape:current-layer":"svg3447"}),T],8,F))])):(0,n.createCommentVNode)("",!0)])})),256))])]),(0,n.createElementVNode)("div",M,[(0,n.createElementVNode)("nav",z,[(0,n.createElementVNode)("button",{disabled:null===$.pagination.prev_page_url,rel:"prev",dusk:"previous",class:(0,n.normalizeClass)(["btn btn-link py-3 px-4 text-80",{"opacity-50":null===$.pagination.prev_page_url,"text-primary":null!==$.pagination.prev_page_url}]),onClick:t[0]||(t[0]=function(e){return Q.fetchAudits($.pagination.prev_page_url)})},(0,n.toDisplayString)(e.__("Previous")),11,G),(0,n.createElementVNode)("span",R,(0,n.toDisplayString)($.pagination.from)+"-"+(0,n.toDisplayString)($.pagination.to)+" of "+(0,n.toDisplayString)($.pagination.total),1),(0,n.createElementVNode)("button",{disabled:null===$.pagination.next_page_url,rel:"next",dusk:"next",class:(0,n.normalizeClass)([{"opacity-50":null===$.pagination.next_page_url,"text-primary":null!==$.pagination.next_page_url},"btn btn-link py-3 px-4 text-80"]),onClick:t[1]||(t[1]=function(e){return Q.fetchAudits($.pagination.next_page_url)})},(0,n.toDisplayString)(e.__("Next")),11,H)])])])])):(0,n.createCommentVNode)("",!0),!1===$.displayAudits?((0,n.openBlock)(),(0,n.createBlock)(Y,{key:1,onClick:(0,n.withModifiers)(Q.showAndFetch,["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("View Audit Log")),1)]})),_:1},8,["onClick"])):(0,n.createCommentVNode)("",!0),null!==$.restore?((0,n.openBlock)(),(0,n.createBlock)(J,{key:2,to:"modals"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(n.Transition,{name:"fade"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(U,{fields:$.parentFields,resourceName:r.resourceName,resourceId:r.resourceId,audit:$.restore,onClose:t[2]||(t[2]=function(e){return $.restore=null}),onRestored:Q.restored},null,8,["fields","resourceName","resourceId","audit","onRestored"])]})),_:1})]})),_:1})):(0,n.createCommentVNode)("",!0)])}]]);Nova.booting((function(e,t,r){e.component("auditable-log",ye)}))},288:()=>{},744:(e,t)=>{t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[e,n]of t)r[e]=n;return r}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,a]=e[u],c=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={103:0,990:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,c,l]=r,s=0;if(i.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkvendor_auditable_log=self.webpackChunkvendor_auditable_log||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[990],(()=>n(415)));var o=n.O(void 0,[990],(()=>n(288)));o=n.O(o)})();